<!doctype html>
<html>
<head><meta charset="utf-8"><title>Login</title></head>
<body>
  <h2>Login</h2>
  <form id="f">
    <input name="email" type="email" placeholder="Email" required><br>
    <input name="password" type="password" placeholder="Password" required><br>
    <button>Login</button>
  </form>
  <div id="m"></div>
  <p><a href="register.html">Register</a></p>
<script>
const f=document.getElementById('f'), m=document.getElementById('m');
f.onsubmit=async e=>{
  e.preventDefault();
  const data=Object.fromEntries(new FormData(f));
  const res=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
  const j=await res.json();
  m.textContent = j.success ? j.message : j.error;
  if(j.success) setTimeout(()=>location='dashboard.html',1000);
};
</script>
</body>
</html>
